import java.awt.*;
import java.sql.*;
import javax.swing.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class Employee {

	private JFrame frmEmployeeManagement;
	private String name, surname1, surname2, id, store;
	public static String mail;
	private String country, city, address, zip_code;

	/**
	 * Launch the application.
	 */
	public static void main(String[] args) {
		EventQueue.invokeLater(new Runnable() {
			public void run() {
				try {
					Employee window = new Employee();
					window.frmEmployeeManagement.setVisible(true);
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		});
	}

	/**
	 * Create the application.
	 */
	public Employee() {
		initialize();
	}

	/**
	 * Initialize the contents of the frame.
	 */
	private void initialize() {
		try (Connection conn = DBConnection.getConnection()) {
			//TABLA EMPLEADOS
			String sqlEmpleado = "SELECT * FROM empleados WHERE mail_empleado = ?";
			PreparedStatement stmtEmpleado = conn.prepareStatement(sqlEmpleado);
			stmtEmpleado.setString(1, mail);
	        
	        ResultSet rsEmpleado = stmtEmpleado.executeQuery();

	        if (rsEmpleado.next()) {
	            name = rsEmpleado.getString("nombre_empleado");
	            surname1 = rsEmpleado.getString("apellido1_empleado");
	            surname2 = rsEmpleado.getString("apellido2_empleado");
	            id = rsEmpleado.getString("id_empleado");
	            store = rsEmpleado.getString("fk_tienda");
	        }
	        
	        //TABLA TIENDA
	        String sqlTienda = "SELECT * FROM tiendas WHERE id_tienda = ?";
			PreparedStatement stmtTienda = conn.prepareStatement(sqlTienda);
			stmtEmpleado.setString(1, store);
	        
	        ResultSet rsTienda = stmtEmpleado.executeQuery();
	        
	        if (rsTienda.next()) {
	        	country = rsTienda.getString("pais_tienda");
	        	city = rsTienda.getString("ciudad_tienda");
	        	address = rsTienda.getString("calle_tienda");
	        	zip_code = rsTienda.getString("postal_tienda");
	        }

	    } catch (SQLException ex) {
	        ex.printStackTrace();
	        JOptionPane.showMessageDialog(null, "Error de conexi√≥n a la base de datos", "Error", JOptionPane.ERROR_MESSAGE);
	    }
		
		frmEmployeeManagement = new JFrame();
	    frmEmployeeManagement.setTitle("Employee Management");
	    frmEmployeeManagement.setIconImage(new ImageIcon("H:\\Mi unidad\\JAVA\\img\\icon2.png").getImage());
	    frmEmployeeManagement.setBounds(100, 100, 450, 300);
	    frmEmployeeManagement.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
	    frmEmployeeManagement.getContentPane().setLayout(null);

	    JLabel lblId = new JLabel("ID: " + (id != null ? id : ""));
	    lblId.setBounds(10, 11, 414, 14);
	    frmEmployeeManagement.getContentPane().add(lblId);

	    JLabel lblName = new JLabel("Name: " + (name != null ? name : "") + " " +
	                                (surname1 != null ? surname1 : "") + " " +
	                                (surname2 != null ? surname2 : ""));
	    lblName.setBounds(10, 36, 414, 14);
	    frmEmployeeManagement.getContentPane().add(lblName);

	    JLabel lblMail = new JLabel("Mail: " + (mail != null ? mail : ""));
	    lblMail.setBounds(10, 61, 414, 14);
	    frmEmployeeManagement.getContentPane().add(lblMail);

	    JLabel lblStore = new JLabel("Store: " + (store != null ? store : ""));
	    lblStore.setBounds(10, 86, 424, 14);
	    frmEmployeeManagement.getContentPane().add(lblStore);

	    JMenuBar menuBar = new JMenuBar();
	    frmEmployeeManagement.setJMenuBar(menuBar);

	    JMenu mnAdd = new JMenu("Add...");
	    menuBar.add(mnAdd);

	    mnAdd.add(new JMenuItem("Customer"));
	    mnAdd.add(new JMenuItem("Employee"));
	    mnAdd.add(new JMenuItem("Order"));
	    mnAdd.add(new JMenuItem("Store"));
	    mnAdd.add(new JMenuItem("Item"));

	    JMenu mnOptions = new JMenu("Options");
	    menuBar.add(mnOptions);

	    JMenuItem menuItem = new JMenuItem("Logout");
	    menuItem.addActionListener(new ActionListener() {
	    	public void actionPerformed(ActionEvent e) {
	    		frmEmployeeManagement.dispose();
	    		Login log = new Login();
	    		log.main(null);
	    	}
	    });
	    mnOptions.add(menuItem);
		
		//Poder modificar la informacion personal tanto de clientes como empleados
		
		//Poder editar estado de pedidos
		
		//Dar de alta clientes y empleados
		
		//Dar de alta productos
	}
}
